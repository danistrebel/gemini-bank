{% extends "base.html" %}
{% block content%}
<h1 class="mb-4">Recurring Payments for Account {{ account.number }}</h1>

<div class="mb-4">
    <a href="{{ url_for('create_recurring_payment', id=account.id) }}" class="btn btn-primary">New Recurring Payment</a>
    <a href="{{ url_for('account', id=account.id) }}" class="btn btn-secondary">Back to Account</a>
</div>

<table class="table table-dark table-striped">
  <thead>
    <tr>
      <th scope="col">Description</th>
      <th scope="col">Amount</th>
      <th scope="col">Frequency</th>
      <th scope="col">Next Payment</th>
      <th scope="col">End Date</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for payment in payments %}
    <tr>
      <td>{{ payment.description }}</td>
      <td>{{ payment.amount }} EUR</td>
      <td>{{ payment.frequency }}</td>
      <td>{{ payment.next_payment_date.strftime("%Y-%m-%d") }}</td>
      <td>{{ payment.end_date.strftime("%Y-%m-%d") if payment.end_date else 'Indefinite' }}</td>
      <td>
        <a href="{{ url_for('delete_recurring_payment', id=payment.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure?')">Cancel</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}